<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StreamVault</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0f172a;
            color: #e2e8f0;
        }
        .container {
            max-width: 90%;
        }
        .message-box {
            position: fixed;
            top: 2rem;
            right: 2rem;
            max-width: 300px;
            z-index: 1000;
        }
        .tab-button.active {
            @apply bg-blue-600 text-white;
        }
    </style>
</head>
<body class="p-4 md:p-8">

    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged, signInAnonymously, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, addDoc, onSnapshot, collection, query, where, getDocs, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- IMPORTANT: Cloudinary Configuration ---
        const CLOUDINARY_CLOUD_NAME = 'dvvzifhg2'; 
        const CLOUDINARY_UPLOAD_PRESET = 'stream'; 
        const CLOUDINARY_URL = `https://api.cloudinary.com/v1_1/${CLOUDINARY_CLOUD_NAME}/video/upload`;
        
        // Global variables for Firebase configuration provided by the environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // --- IMPORTANT: CONFIGURATION FOR THE ADMIN'S GOOGLE EMAIL ---
        // This email address will be the only one able to upload videos.
        const adminEmail = 'robloxbestgamer111@gmail.com';

        // --- UI Element References ---
        const authContainer = document.getElementById('auth-container');
        const mainContainer = document.getElementById('main-container');
        const googleSignInBtn = document.getElementById('google-signin-btn');
        const signOutBtn = document.getElementById('signout-btn');
        const uploadSection = document.getElementById('upload-section');
        const uploadForm = document.getElementById('upload-form');
        const videoTypeSelect = document.getElementById('videoType');
        const seriesDetailsDiv = document.getElementById('series-details');
        const movieDetailsDiv = document.getElementById('movie-details');
        const messageBox = document.getElementById('message-box');
        const moviesTabBtn = document.getElementById('movies-tab');
        const seriesTabBtn = document.getElementById('series-tab');
        const moviesContainer = document.getElementById('movies-container');
        const seriesContainer = document.getElementById('series-container');
        const videoPlayerModal = document.getElementById('video-player-modal');
        const videoPlayer = document.getElementById('video-player');
        const episodeListModal = document.getElementById('episode-list-modal');
        const episodeListContainer = document.getElementById('episode-list-container');
        const userStatusText = document.getElementById('user-status');
        const uploadButton = document.getElementById('upload-button');
        const uploadProgress = document.getElementById('upload-progress');
        const uploadProgressContainer = document.getElementById('upload-progress-container');
        const deleteConfirmModal = document.getElementById('delete-confirm-modal');
        const deleteConfirmBtn = document.getElementById('delete-confirm-btn');
        const deleteCancelBtn = document.getElementById('delete-cancel-btn');
        const deleteConfirmText = document.getElementById('delete-confirm-text');
        const loadingIndicator = document.getElementById('loading-indicator');
        
        let currentActiveTab = 'movies';
        let deletionTarget = null; // Store the target for deletion
        
        // --- Helper Functions ---
        /**
         * Displays a temporary message to the user.
         * @param {string} message The message to display.
         * @param {string} type The type of message (e.g., 'success', 'error', 'info').
         */
        const showMessage = (message, type = 'info') => {
            if (!messageBox) return; 
            const el = document.createElement('div');
            el.className = `p-4 rounded-lg shadow-lg mb-4 transform transition-transform duration-300 ease-out translate-x-0`;
            if (type === 'success') {
                el.classList.add('bg-green-500', 'text-white');
            } else if (type === 'error') {
                el.classList.add('bg-red-500', 'text-white');
            } else {
                el.classList.add('bg-blue-500', 'text-white');
            }
            el.innerHTML = `<p>${message}</p>`;
            messageBox.appendChild(el);

            setTimeout(() => {
                el.classList.add('translate-x-full');
                el.addEventListener('transitionend', () => el.remove());
            }, 3000);
        };
        
        /**
         * Generates a streamable Cloudinary URL from a public ID.
         * @param {string} publicId The Cloudinary public ID of the video.
         * @returns {string} The full streamable URL.
         */
        const getCloudinaryVideoUrl = (publicId) => {
            return `https://res.cloudinary.com/${CLOUDINARY_CLOUD_NAME}/video/upload/f_auto/q_auto/${publicId}`;
        };

        /**
         * Deletes a document from Firestore.
         * @param {string} docPath The path to the document to delete.
         * @param {string} title The title of the item for the message.
         */
        const deleteFromFirestore = async (docPath, title) => {
            try {
                const docRef = doc(db, docPath);
                await deleteDoc(docRef);
                showMessage(`Successfully deleted '${title}' from the database.`, 'success');
                console.log(`Document '${docPath}' successfully deleted.`);
            } catch (error) {
                console.error("Error deleting document: ", error);
                showMessage(`Error deleting file: ${error.message}`, 'error');
            }
        };

        /**
         * Renders a list of video cards.
         * @param {Array} videos The array of video objects.
         * @param {HTMLElement} container The container to render into.
         * @param {string} type 'movie' or 'series'.
         * @param {object} user The current authenticated user object.
         */
        const renderVideos = (videos, container, type, user) => {
            container.innerHTML = '';
            const isAdmin = user && user.email === adminEmail;
            
            if (videos.length === 0) {
                container.innerHTML = `<p class="text-center text-gray-400">No ${type} available yet. Check back soon!</p>`;
                return;
            }

            videos.forEach(video => {
                const card = document.createElement('div');
                card.className = "group relative cursor-pointer transform transition-transform duration-300 hover:scale-105 rounded-xl overflow-hidden shadow-lg";
                card.innerHTML = `
                    <img src="${video.thumbnailUrl || 'https://placehold.co/400x600/1e293b/cbd5e1?text=No+Image'}" alt="${video.title}" class="w-full h-72 object-cover">
                    <div class="absolute inset-0 bg-gradient-to-t from-gray-900 via-transparent to-transparent opacity-90 group-hover:opacity-100 transition-opacity duration-300 flex flex-col justify-end p-4">
                        <h3 class="text-xl font-bold text-white">${video.title}</h3>
                        ${video.year ? `<p class="text-sm text-gray-300">${video.year}</p>` : ''}
                    </div>
                `;

                if (isAdmin) {
                    const deleteButton = document.createElement('button');
                    deleteButton.innerHTML = '&times;';
                    deleteButton.className = "absolute top-2 right-2 text-white bg-red-600 rounded-full w-8 h-8 flex items-center justify-center text-lg opacity-0 group-hover:opacity-100 transition-opacity duration-300 hover:bg-red-700";
                    deleteButton.title = `Delete ${video.title}`;
                    deleteButton.onclick = (e) => {
                        e.stopPropagation();
                        deletionTarget = {
                            id: video.id,
                            title: video.title,
                            type: type,
                            docPath: `artifacts/${appId}/public/data/${type}/${video.id}`
                        };
                        deleteConfirmText.textContent = `Are you sure you want to delete "${deletionTarget.title}"? This action cannot be undone.`;
                        deleteConfirmModal.classList.remove('hidden');
                    };
                    card.appendChild(deleteButton);
                }

                if (type === 'movie') {
                    card.onclick = () => playVideo(video.videoUrl, video.title);
                } else if (type === 'series') {
                    card.onclick = () => showEpisodes(video);
                }
                container.appendChild(card);
            });
        };

        /**
         * Plays a video in a modal.
         * @param {string} videoUrl The URL of the video to play.
         * @param {string} title The title of the video.
         */
        const playVideo = (videoUrl, title) => {
            if (videoPlayer && videoPlayerModal) {
                videoPlayer.src = videoUrl;
                document.getElementById('video-player-title').textContent = title;
                videoPlayerModal.classList.remove('hidden');
            }
        };
        
        /**
         * Shows the list of episodes for a series in a modal.
         * @param {object} series The series object containing episode data.
         */
        const showEpisodes = (series) => {
            if (episodeListModal && episodeListContainer) {
                episodeListContainer.innerHTML = '';
                document.getElementById('episode-list-title').textContent = series.title;

                if (series.episodes && series.episodes.length > 0) {
                    series.episodes.forEach(episode => {
                        const episodeItem = document.createElement('div');
                        episodeItem.className = "p-4 bg-gray-700 rounded-lg shadow-md hover:bg-gray-600 transition-colors duration-200 cursor-pointer";
                        episodeItem.innerHTML = `<h4 class="text-xl font-bold text-white">${episode.title}</h4>`;
                        episodeItem.onclick = () => playVideo(episode.videoUrl, `${series.title} - ${episode.title}`);
                        episodeListContainer.appendChild(episodeItem);
                    });
                } else {
                    episodeListContainer.innerHTML = `<p class="text-center text-gray-400">No episodes available yet.</p>`;
                }
                episodeListModal.classList.remove('hidden');
            }
        };

        // --- Main App Initialization Logic ---

        // Firebase Auth listener
        // This is the single, central point of truth for the user's authentication state.
        // All UI updates and data fetching should be triggered from here.
        onAuthStateChanged(auth, async (user) => {
            loadingIndicator.classList.add('hidden');
            mainContainer.classList.remove('hidden');

            // Sign in anonymously with the initial token if it exists
            if (initialAuthToken && !user) {
                try {
                    await signInWithCustomToken(auth, initialAuthToken);
                } catch (error) {
                    console.error("Error signing in with custom token: ", error);
                    showMessage(`Error signing in: ${error.message}`, 'error');
                    signInAnonymously(auth); // Fallback to anonymous sign-in if token fails
                }
                return;
            }

            if (user && user.isAnonymous) {
                // Anonymous user is signed in
                userStatusText.textContent = 'Signed in anonymously';
                googleSignInBtn.style.display = 'block'; // Show Google sign-in button
                signOutBtn.style.display = 'none';
                uploadSection.style.display = 'none';
            } else if (user) {
                // Google-signed-in user
                userStatusText.textContent = `Signed in as: ${user.email}`;
                googleSignInBtn.style.display = 'none';
                signOutBtn.style.display = 'block';
                if (user.email === adminEmail) {
                    uploadSection.style.display = 'block';
                } else {
                    uploadSection.style.display = 'none';
                }
            } else {
                // No user is signed in, fall back to anonymous if not already
                await signInAnonymously(auth);
            }
        });

        // Event listeners for the buttons and forms
        document.addEventListener('DOMContentLoaded', () => {
             // Sign in button listener
            if (googleSignInBtn) {
                googleSignInBtn.addEventListener('click', async () => {
                    const provider = new GoogleAuthProvider();
                    try {
                        await signInWithPopup(auth, provider);
                        showMessage('Successfully signed in!', 'success');
                    } catch (error) {
                        console.error("Error during Google sign-in: ", error);
                        showMessage(`Sign-in failed: ${error.message}`, 'error');
                    }
                });
            }

            // Sign out button listener
            if (signOutBtn) {
                signOutBtn.addEventListener('click', async () => {
                    try {
                        await signOut(auth);
                        showMessage('Successfully signed out.', 'success');
                    } catch (error) {
                        console.error("Error signing out: ", error);
                        showMessage(`Sign-out failed: ${error.message}`, 'error');
                    }
                });
            }

            // Tabs functionality
            const switchTab = (tabName) => {
                currentActiveTab = tabName;
                moviesTabBtn.classList.remove('active');
                seriesTabBtn.classList.remove('active');
                moviesContainer.classList.add('hidden');
                seriesContainer.classList.add('hidden');

                if (tabName === 'movies') {
                    moviesTabBtn.classList.add('active');
                    moviesContainer.classList.remove('hidden');
                } else {
                    seriesTabBtn.classList.add('active');
                    seriesContainer.classList.remove('hidden');
                }
            };

            if (moviesTabBtn) moviesTabBtn.addEventListener('click', () => switchTab('movies'));
            if (seriesTabBtn) seriesTabBtn.addEventListener('click', () => switchTab('series'));
            switchTab(currentActiveTab); // Initialize tab state

            // Upload form type change listener
            if (videoTypeSelect) {
                videoTypeSelect.addEventListener('change', (e) => {
                    if (e.target.value === 'series') {
                        seriesDetailsDiv.classList.remove('hidden');
                        movieDetailsDiv.classList.add('hidden');
                    } else {
                        seriesDetailsDiv.classList.add('hidden');
                        movieDetailsDiv.classList.remove('hidden');
                    }
                });
            }

            // Upload form submission
            if (uploadForm) {
                uploadForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    
                    const user = auth.currentUser;
                    if (!user || user.email !== adminEmail) {
                        showMessage('You must be an admin to upload videos.', 'error');
                        return;
                    }

                    const videoFile = document.getElementById('videoFile').files[0];
                    if (!videoFile) {
                        showMessage('Please select a video file to upload.', 'error');
                        return;
                    }
                    
                    uploadButton.disabled = true;
                    uploadButton.textContent = 'Uploading...';
                    uploadProgressContainer.classList.remove('hidden');
                    
                    try {
                        const formData = new FormData();
                        formData.append('file', videoFile);
                        formData.append('upload_preset', CLOUDINARY_UPLOAD_PRESET);
                        formData.append('context', `appId=${appId}`);

                        const response = await fetch(CLOUDINARY_URL, {
                            method: 'POST',
                            body: formData
                        });

                        // Check for non-2xx response status
                        if (!response.ok) {
                            const errorData = await response.json();
                            throw new Error(errorData.error.message || 'Cloudinary upload failed.');
                        }
                        
                        // After successful upload, set progress to 100%
                        uploadProgress.style.width = `100%`;
                        uploadProgress.textContent = `100%`;

                        const data = await response.json();
                        
                        // Save video info to Firestore
                        const videoType = videoTypeSelect.value;
                        const videoDoc = {
                            videoUrl: data.secure_url,
                            publicId: data.public_id,
                            thumbnailUrl: data.eager ? data.eager[0].secure_url : 'https://placehold.co/400x600/1e293b/cbd5e1?text=No+Image'
                        };

                        if (videoType === 'movie') {
                            const title = document.getElementById('movie-title').value;
                            const year = document.getElementById('movie-year').value;
                            const newDocRef = await addDoc(collection(db, `artifacts/${appId}/public/data/movies`), {
                                ...videoDoc,
                                title,
                                year
                            });
                            console.log("Movie written with ID: ", newDocRef.id);
                        } else if (videoType === 'series') {
                            const seriesId = document.getElementById('series-id').value;
                            const episodeTitle = document.getElementById('episode-title').value;
                            const seriesDocRef = doc(db, `artifacts/${appId}/public/data/series`, seriesId);
                            const seriesDoc = await getDoc(seriesDocRef);
                            
                            const newEpisode = {
                                title: episodeTitle,
                                videoUrl: data.secure_url,
                                publicId: data.public_id
                            };
                            
                            if (seriesDoc.exists()) {
                                const currentEpisodes = seriesDoc.data().episodes || [];
                                await setDoc(seriesDocRef, { episodes: [...currentEpisodes, newEpisode] }, { merge: true });
                                console.log("Episode added to series: ", seriesId);
                            } else {
                                const seriesTitle = document.getElementById('series-title').value;
                                await setDoc(seriesDocRef, {
                                    title: seriesTitle,
                                    episodes: [newEpisode]
                                });
                                console.log("New series with first episode written with ID: ", seriesId);
                            }
                        }

                        showMessage('Video uploaded and saved to database!', 'success');
                        uploadForm.reset();
                    } catch (error) {
                        console.error("Upload error: ", error);
                        showMessage(`Upload failed: ${error.message}`, 'error');
                    } finally {
                        uploadButton.disabled = false;
                        uploadButton.textContent = 'Upload Video';
                        uploadProgressContainer.classList.add('hidden');
                        uploadProgress.style.width = '0%';
                        uploadProgress.textContent = '0%';
                    }
                });
            }

            // Close modal buttons
            if (videoPlayerModal) {
                videoPlayerModal.querySelector('.close-modal-btn').addEventListener('click', () => {
                    videoPlayer.pause();
                    videoPlayer.src = '';
                    videoPlayerModal.classList.add('hidden');
                });
            }

            if (episodeListModal) {
                episodeListModal.querySelector('.close-modal-btn').addEventListener('click', () => {
                    episodeListModal.classList.add('hidden');
                });
            }

            // Delete confirmation modal buttons
            if (deleteConfirmBtn) {
                deleteConfirmBtn.addEventListener('click', async () => {
                    if (deletionTarget) {
                        await deleteFromFirestore(deletionTarget.docPath, deletionTarget.title);
                        deletionTarget = null;
                        deleteConfirmModal.classList.add('hidden');
                    }
                });
            }

            if (deleteCancelBtn) {
                deleteCancelBtn.addEventListener('click', () => {
                    deletionTarget = null;
                    deleteConfirmModal.classList.add('hidden');
                });
            }

            // Fetch data
            const qMovies = collection(db, `artifacts/${appId}/public/data/movies`);
            const qSeries = collection(db, `artifacts/${appId}/public/data/series`);
            
            // onSnapshot listener for movies
            onSnapshot(qMovies, (querySnapshot) => {
                const movies = [];
                querySnapshot.forEach(doc => {
                    movies.push({ id: doc.id, ...doc.data() });
                });
                renderVideos(movies, moviesContainer, 'movie', auth.currentUser);
            });
            
            // onSnapshot listener for series
            onSnapshot(qSeries, (querySnapshot) => {
                const series = [];
                querySnapshot.forEach(doc => {
                    series.push({ id: doc.id, ...doc.data() });
                });
                renderVideos(series, seriesContainer, 'series', auth.currentUser);
            });
        });

    </script>

    <!-- UI -->
    <div id="loading-indicator" class="flex items-center justify-center min-h-screen text-4xl font-bold text-blue-500">
        Loading...
    </div>

    <div id="main-container" class="hidden">
        <!-- Message Box Container -->
        <div id="message-box" class="message-box"></div>

        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-center py-4 mb-8 border-b-2 border-gray-700">
            <h1 class="text-4xl font-bold text-white mb-4 md:mb-0">StreamVault</h1>
            <div id="auth-container" class="flex items-center space-x-4">
                <span id="user-status" class="text-gray-400">Loading...</span>
                <button id="google-signin-btn" class="bg-blue-600 text-white font-bold py-2 px-6 rounded-lg shadow-lg hover:bg-blue-700 transition-colors duration-200" style="display: none;">
                    Sign in with Google
                </button>
                <button id="signout-btn" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg shadow-lg hover:bg-gray-700 transition-colors duration-200" style="display: none;">
                    Sign Out
                </button>
            </div>
        </header>

        <!-- Admin Upload Section -->
        <div id="upload-section" class="hidden bg-gray-800 p-6 rounded-xl shadow-lg mb-8">
            <h2 class="text-2xl font-bold text-white mb-4">Admin Upload</h2>
            <form id="upload-form" class="space-y-4">
                <div class="flex flex-col">
                    <label for="videoFile" class="text-gray-300 mb-2">Video File</label>
                    <input type="file" id="videoFile" accept="video/*" required class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                </div>
                <div class="flex flex-col">
                    <label for="videoType" class="text-gray-300 mb-2">Video Type</label>
                    <select id="videoType" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                        <option value="movie">Movie</option>
                        <option value="series">Series</option>
                    </select>
                </div>

                <!-- Movie Details -->
                <div id="movie-details" class="space-y-4">
                    <div class="flex flex-col">
                        <label for="movie-title" class="text-gray-300 mb-2">Movie Title</label>
                        <input type="text" id="movie-title" placeholder="Enter movie title" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                    </div>
                    <div class="flex flex-col">
                        <label for="movie-year" class="text-gray-300 mb-2">Release Year</label>
                        <input type="number" id="movie-year" placeholder="e.g., 2024" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                    </div>
                </div>

                <!-- Series Details -->
                <div id="series-details" class="hidden space-y-4">
                    <div class="flex flex-col">
                        <label for="series-id" class="text-gray-300 mb-2">Series ID (e.g., stranger-things)</label>
                        <input type="text" id="series-id" placeholder="Enter unique series ID" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                    </div>
                    <div class="flex flex-col">
                        <label for="series-title" class="text-gray-300 mb-2">Series Title</label>
                        <input type="text" id="series-title" placeholder="Enter series title" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                    </div>
                    <div class="flex flex-col">
                        <label for="episode-title" class="text-gray-300 mb-2">Episode Title</label>
                        <input type="text" id="episode-title" placeholder="e.g., S01E01 - The Vanishing of Will Byers" class="p-2 rounded-lg bg-gray-700 text-white border border-gray-600">
                    </div>
                </div>

                <div id="upload-progress-container" class="hidden w-full bg-gray-700 rounded-full mt-4">
                    <div id="upload-progress" class="bg-blue-600 text-xs font-medium text-blue-100 text-center p-0.5 leading-none rounded-full" style="width: 0%">0%</div>
                </div>
                
                <button id="upload-button" type="submit" class="w-full bg-green-600 text-white font-bold py-3 rounded-lg shadow-lg hover:bg-green-700 transition-colors duration-200">
                    Upload Video
                </button>
            </form>
        </div>

        <!-- Tab Navigation -->
        <div class="flex justify-center space-x-4 mb-8">
            <button id="movies-tab" class="tab-button px-6 py-2 rounded-full font-bold transition-colors duration-200">
                Movies
            </button>
            <button id="series-tab" class="tab-button px-6 py-2 rounded-full font-bold transition-colors duration-200">
                Series
            </button>
        </div>

        <!-- Content Containers -->
        <div id="movies-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
            <!-- Movie cards will be inserted here -->
        </div>

        <div id="series-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 hidden">
            <!-- Series cards will be inserted here -->
        </div>

    </div>

    <!-- Video Player Modal -->
    <div id="video-player-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="relative w-full max-w-5xl bg-gray-800 rounded-xl shadow-2xl p-6">
            <button class="close-modal-btn absolute top-2 right-2 text-white bg-gray-800 rounded-full w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-700 transition-colors duration-200">
                &times;
            </button>
            <h3 id="video-player-title" class="text-3xl font-bold text-white mb-4 text-center"></h3>
            <video id="video-player" controls class="w-full h-auto rounded-lg">
                Your browser does not support the video tag.
            </video>
        </div>
    </div>
    
    <!-- Episode List Modal -->
    <div id="episode-list-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="relative w-full max-w-md bg-gray-800 rounded-xl shadow-2xl p-6">
            <button class="close-modal-btn absolute top-2 right-2 text-white bg-gray-800 rounded-full w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-700 transition-colors duration-200">
                &times;
            </button>
            <h3 id="episode-list-title" class="text-3xl font-bold text-white mb-6 text-center">Episodes</h3>
            <div id="episode-list-container" class="space-y-4">
                <!-- Episode list will be dynamically inserted here -->
            </div>
        </div>
    </div>
    
    <!-- Delete Confirmation Modal -->
    <div id="delete-confirm-modal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="relative w-full max-w-md bg-gray-800 rounded-xl shadow-2xl p-6 text-center">
            <h3 class="text-2xl font-bold text-white mb-4">Confirm Deletion</h3>
            <p id="delete-confirm-text" class="text-gray-300 mb-6">Are you sure you want to delete this item? This action cannot be undone.</p>
            <div class="flex justify-center space-x-4">
                <button id="delete-cancel-btn" class="bg-gray-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-gray-700 transition-colors duration-200">
                    Cancel
                </button>
                <button id="delete-confirm-btn" class="bg-red-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-red-700 transition-colors duration-200">
                    Delete
                </button>
            </div>
        </div>
    </div>
</body>
</html>
